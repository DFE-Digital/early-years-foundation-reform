<div class="govuk-width-container">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      <p class="govuk-heading-m">Details</p>
      <%= form_with(model: content_block, local: true) do |form| %>
        <% if content_block.errors.any? %>
          <div id="error_explanation" class="govuk-error-message" >
            <h2><%= pluralize(content_block.errors.count, "error") %> prohibited this page from being saved:</h2>
            <ul>
              <% content_block.errors.each do |error| %>
                <li><%= error.full_message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <fieldset class="govuk-fieldset">
          <div class="govuk-form-group">
            <label class="govuk-label" for="Heading">
              <%= form.label :name, "Name - this should be provided by the developers, it refers to part of the fixed pages" %>
            </label>
            <%= form.text_field :name, :class => 'govuk-input govuk-!-width-three-quarters', disabled: content_block&.id %>
          </div>

          <div class="govuk-form-group">
            <label class="govuk-label" for="Description">
              <%= form.label :description, "Description - where will the block appear ?" %>
            </label>
            <%= form.text_field :description, :class => 'govuk-input govuk-!-width-three-quarters' %>
          </div>

          <div class="govuk-form-group gem-c-govspeak">
            <label id="markdown-hint" for="markdown-editor" class="govuk-hint">
              Content
            </label>
            <%= form.text_area :markdown, :id => 'markdown-editor', :rows => 20, :cols => 35,  :class => "govuk-textarea" %>
          </div>

          <div>
            <%= form.submit :class => "govuk-button"%>
          </div>
        </fieldset>
      <% end %>
    </div>

    <div class="govuk-grid-column-one-half">
        <p class="govuk-heading-m">Preview</p>
        <div id='markdown-render' class='gem-c-govspeak'>
          <%= sanitize(@md, tags: GovspeakToHTML::ALLOWED_TAGS) %>
        </div>
    </div>
  </div>
</div>
